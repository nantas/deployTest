{"version":3,"sources":["project.js"],"names":["require","e","t","n","r","s","o","u","a","i","f","Error","code","l","exports","call","length","DialogMng","module","Fire","_RFpush","Class","extends","Behavior","properties","nextRoom","figureTex1","default","url","Texture","figureTex2","text1","text2","text3","text4","onLoad","policy","cc","ResolutionPolicy","ContainerStrategy","PROPORTION_TO_FRAME","ContentStrategy","SHOW_ALL","view","setDesignResolutionSize","this","textHolder","engine","getCurrentSceneN","getChildByName","textLabel","LabelTTF","size","setName","addChild","setColor","Color","hintArrow","reception","eventManager","addListener","event","EventListener","TOUCH_ALL_AT_ONCE","onTouchesBegan","bind","roomBtn","addTouchEventListener","roomBtnTouched","businessBtn","businessBtnTouched","textIdx","acceptInput","startSession","sender","type","ccui","Widget","TOUCH_ENDED","toBusinessRoom","doBusiness","touches","processSession","showText","setTimeout","hintBlink","hintStop","showFigureAction","log","loadScene","showFigureNormal","setTexture","idx","setVisible","setString","hideText","blinkAction","repeatForever","blink","runAction","stopAllActions","_RFpop"],"mappings":"AAAAA,QAAQ,QAAUC,GAAEC,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIE,GAAkB,kBAATR,UAAqBA,OAAQ,KAAIO,GAAGC,EAAE,MAAOA,GAAEF,GAAE,EAAI,IAAGG,EAAE,MAAOA,GAAEH,GAAE,EAAI,IAAII,GAAE,GAAIC,OAAM,uBAAuBL,EAAE,IAAK,MAAMI,GAAEE,KAAK,mBAAmBF,EAAE,GAAIG,GAAEV,EAAEG,IAAIQ,WAAYZ,GAAEI,GAAG,GAAGS,KAAKF,EAAEC,QAAQ,SAASb,GAAG,GAAIE,GAAED,EAAEI,GAAG,GAAGL,EAAG,OAAOI,GAAEF,EAAEA,EAAEF,IAAIY,EAAEA,EAAEC,QAAQb,EAAEC,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGQ,QAAkD,IAAI,GAA1CL,GAAkB,kBAATT,UAAqBA,QAAgBM,EAAE,EAAEA,EAAEF,EAAEY,OAAOV,IAAID,EAAED,EAAEE,GAAI,OAAOD,KAAKY,WAAa,SAASjB,EAAQkB,EAAOJ,GACzeK,KAAKC,QAAQF,EAAQ,0BAA2B,YAKhCC,MAAKE,OACjBC,UAAWH,KAAKI,SAChBC,YACIC,SAAU,GACVC,YACIC,UAAW,GACXC,IAAKT,KAAKU,SAEdC,YACIH,UAAW,GACXC,IAAKT,KAAKU,SAEdE,MAAO,mBACPC,MAAO,gBACPC,MAAO,WACPC,MAAO,UAEXC,OAAQ,WACJ,GAAIC,GAAS,GAAIC,IAAGC,iBAAiBD,GAAGE,kBAAkBC,oBAAqBH,GAAGI,gBAAgBC,SAClGL,IAAGM,KAAKC,wBAAwB,IAAK,IAAKR,GAE1CS,KAAKC,WAAa3B,KAAK4B,OAAOC,mBAAmBC,eAAe,cAChEJ,KAAKK,UAAY,GAAIb,IAAGc,SAAS,YAAa,QAAS,GAAId,GAAGe,KAAK,IAAK,MACxEP,KAAKK,UAAUG,QAAQ,aACvBR,KAAKC,WAAWQ,SAAST,KAAKK,WAC9BL,KAAKK,UAAUK,SAAS,GAAIlB,IAAGmB,MAAM,EAAG,EAAG,IAE3CX,KAAKY,UAAYtC,KAAK4B,OAAOC,mBAAmBC,eAAe,SAE/DJ,KAAKa,UAAYvC,KAAK4B,OAAOC,mBAAmBC,eAAe,WAE/DZ,GAAGsB,aAAaC,aACZC,MAAOxB,GAAGyB,cAAcC,kBACxBC,eAAgBnB,KAAKmB,eAAeC,KAAKpB,OAC1CA,MAEHA,KAAKqB,QAAU/C,KAAK4B,OAAOC,mBAAmBC,eAAe,QAC7DJ,KAAKqB,QAAQC,sBAAsBtB,KAAKuB,eAAgBvB,MAExDA,KAAKwB,YAAclD,KAAK4B,OAAOC,mBAAmBC,eAAe,QAC7DJ,KAAKwB,aACLxB,KAAKwB,YAAYF,sBAAsBtB,KAAKyB,mBAAoBzB,MAGpEA,KAAK0B,QAAU,EACf1B,KAAK2B,aAAc,EACnB3B,KAAK4B,gBAGTL,eAAgB,SAAwBM,EAAQC,GAC5C,OAAQA,GACJ,IAAKC,MAAKC,OAAOC,YACbjC,KAAKkC,mBAOjBT,mBAAoB,SAA4BI,EAAQC,GACpD,OAAQA,GACJ,IAAKC,MAAKC,OAAOC,YACbjC,KAAKmC,eAOjBhB,eAAgB,SAAwBiB,EAASpB,GACzChB,KAAK2B,aACL3B,KAAKqC,kBAIbT,aAAc,WACV5B,KAAK0B,UACL1B,KAAKsC,SAAStC,KAAK0B,SACnBa,WAAW,WACPvC,KAAKwC,YACLxC,KAAK2B,aAAc,GACpBP,KAAKpB,MAAO,MAGnBqC,eAAgB,WACZrC,KAAKyC,aACCzC,KAAK0B,QAAU,IACjB1B,KAAK2B,aAAc,EACnB3B,KAAKsC,SAAStC,KAAK0B,SACnBa,WAAW,WACPvC,KAAKwC,YACLxC,KAAK2B,aAAc,GACpBP,KAAKpB,MAAO,OAIvBkC,eAAgB,WACZlC,KAAKyC,WACLzC,KAAK2B,aAAc,EACnB3B,KAAK0C,mBACL1C,KAAKsC,SAAS,GACdC,WAAW,WACPjE,KAAKqE,IAAI3C,KAAKX,OACdf,KAAK4B,OAAO0C,UAAU5C,KAAKpB,WAC5BwC,KAAKpB,MAAO,MAGnBmC,WAAY,WACRnC,KAAKyC,WACLzC,KAAK0C,mBACL1C,KAAKsC,SAAS,IAGlBO,iBAAkB,WACd7C,KAAKa,UAAUiC,WAAW9C,KAAKnB,aAGnC6D,iBAAkB,WACd1C,KAAKa,UAAUiC,WAAW9C,KAAKf,aAGnCqD,SAAU,SAAkBS,GACxB/C,KAAKK,UAAU2C,YAAW,GAC1BhD,KAAKK,UAAU4C,UAAUjD,KAAK,OAAS+C,KAE3CG,SAAU,WACNlD,KAAKK,UAAU2C,YAAW,IAG9BR,UAAW,WACP,GAAIW,GAAc3D,GAAG4D,cAAc5D,GAAG6D,MAAM,EAAG,GAC/CrD,MAAKY,UAAUoC,YAAW,GAC1BhD,KAAKY,UAAU0C,UAAUH,IAG7BV,SAAU,WACNzC,KAAKY,UAAU2C,iBACfvD,KAAKY,UAAUoC,YAAW,KAIlC1E,MAAKkF,mBACM","file":"project.js","sourcesContent":["require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({\"DialogMng\":[function(require,module,exports){\nFire._RFpush(module, 'ad796ch2mNLp43ZKnKojj64', 'DialogMng');\n// scripts/DialogMng.js\n\n\"use strict\";\n\nvar DialogMng = Fire.Class({\n    \"extends\": Fire.Behavior,\n    properties: {\n        nextRoom: \"\",\n        figureTex1: {\n            \"default\": \"\",\n            url: Fire.Texture\n        },\n        figureTex2: {\n            \"default\": \"\",\n            url: Fire.Texture\n        },\n        text1: \"欢迎光临，我将为您提供支持与服务\",\n        text2: \"点击右上角按钮选择业务房间\",\n        text3: \"带您进入业务房间\",\n        text4: \"前往业务房间\"\n    },\n    onLoad: function onLoad() {\n        var policy = new cc.ResolutionPolicy(cc.ContainerStrategy.PROPORTION_TO_FRAME, cc.ContentStrategy.SHOW_ALL);\n        cc.view.setDesignResolutionSize(720, 480, policy);\n        // text\n        this.textHolder = Fire.engine.getCurrentSceneN().getChildByName(\"textHolder\");\n        this.textLabel = new cc.LabelTTF(\"Main Menu\", \"Arial\", 20, cc.size(300, 100));\n        this.textLabel.setName(\"textLabel\");\n        this.textHolder.addChild(this.textLabel);\n        this.textLabel.setColor(new cc.Color(0, 0, 0));\n        // hint arrow\n        this.hintArrow = Fire.engine.getCurrentSceneN().getChildByName(\"arrow\");\n        // receptionist\n        this.reception = Fire.engine.getCurrentSceneN().getChildByName(\"figure1\");\n        // register input\n        cc.eventManager.addListener({\n            event: cc.EventListener.TOUCH_ALL_AT_ONCE,\n            onTouchesBegan: this.onTouchesBegan.bind(this)\n        }, this);\n        // btn\n        this.roomBtn = Fire.engine.getCurrentSceneN().getChildByName(\"btn1\");\n        this.roomBtn.addTouchEventListener(this.roomBtnTouched, this);\n\n        this.businessBtn = Fire.engine.getCurrentSceneN().getChildByName(\"btn3\");\n        if (this.businessBtn) {\n            this.businessBtn.addTouchEventListener(this.businessBtnTouched, this);\n        }\n        // counter\n        this.textIdx = 0;\n        this.acceptInput = false;\n        this.startSession();\n    },\n\n    roomBtnTouched: function roomBtnTouched(sender, type) {\n        switch (type) {\n            case ccui.Widget.TOUCH_ENDED:\n                this.toBusinessRoom();\n                break;\n            default:\n                break;\n        }\n    },\n\n    businessBtnTouched: function businessBtnTouched(sender, type) {\n        switch (type) {\n            case ccui.Widget.TOUCH_ENDED:\n                this.doBusiness();\n                break;\n            default:\n                break;\n        }\n    },\n\n    onTouchesBegan: function onTouchesBegan(touches, event) {\n        if (this.acceptInput) {\n            this.processSession();\n        }\n    },\n\n    startSession: function startSession() {\n        this.textIdx++;\n        this.showText(this.textIdx);\n        setTimeout((function () {\n            this.hintBlink();\n            this.acceptInput = true;\n        }).bind(this), 1000);\n    },\n\n    processSession: function processSession() {\n        this.hintStop();\n        if (++this.textIdx < 3) {\n            this.acceptInput = false;\n            this.showText(this.textIdx);\n            setTimeout((function () {\n                this.hintBlink();\n                this.acceptInput = true;\n            }).bind(this), 1000);\n        }\n    },\n\n    toBusinessRoom: function toBusinessRoom() {\n        this.hintStop();\n        this.acceptInput = false;\n        this.showFigureAction();\n        this.showText(3);\n        setTimeout((function () {\n            Fire.log(this.text4);\n            Fire.engine.loadScene(this.nextRoom);\n        }).bind(this), 1000);\n    },\n\n    doBusiness: function doBusiness() {\n        this.hintStop();\n        this.showFigureAction();\n        this.showText(4);\n    },\n\n    showFigureNormal: function showFigureNormal() {\n        this.reception.setTexture(this.figureTex1);\n    },\n\n    showFigureAction: function showFigureAction() {\n        this.reception.setTexture(this.figureTex2);\n    },\n\n    showText: function showText(idx) {\n        this.textLabel.setVisible(true);\n        this.textLabel.setString(this['text' + idx]);\n    },\n    hideText: function hideText() {\n        this.textLabel.setVisible(false);\n    },\n\n    hintBlink: function hintBlink() {\n        var blinkAction = cc.repeatForever(cc.blink(1, 1));\n        this.hintArrow.setVisible(true);\n        this.hintArrow.runAction(blinkAction);\n    },\n\n    hintStop: function hintStop() {\n        this.hintArrow.stopAllActions();\n        this.hintArrow.setVisible(false);\n    }\n});\n\nFire._RFpop();\n},{}]},{},[\"DialogMng\"]);\n"],"sourceRoot":"/source/"}